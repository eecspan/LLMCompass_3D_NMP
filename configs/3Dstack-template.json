{
    "name": "3D Stack TEST",
    "device_count": 4,
    "interconnect": {
        "link": {
            "name": "NVLink3",
            "bandwidth_per_direction_byte": 25e9,
            "bandwidth_both_directions_byte": 50e9,
            "latency_second": 8.92e-6,
            "flit_size_byte": 16,
            "header_size_byte": 16,
            "max_payload_size_byte": 256
        },
        "link_count_per_device": 12,
        "topology": "FC"
    },
    "device": {
        "frequency_Hz": 1410e6,
        "compute_chiplet_count": 1,
        "compute_chiplet": {
            "physical_core_count": 9,  
            "core_count": 16,
            "_commet_core":"需要注意暂时选择channel数和core数保持一致，1core-1channel",
            
            "process_node": "7nm",
            "core": {
                "sublane_count": 4,
                "systolic_array": {
                    "array_width": 16,
                    "array_height": 16,
                    "data_type": "fp16",
                    "mac_per_cycle": 1
                },
                "vector_unit": {
                    "vector_width": 32,
                    "flop_per_cycle": 4,
                    "data_type": "fp16",
                    "int32_count": 16,
                    "fp16_count": 0,
                    "fp32_count": 16,
                    "fp64_count": 8
                },
                "register_file": {
                    "num_reg_files": 1,
                    "num_registers": 16384,
                    "register_bitwidth":32,
                    "num_rdwr_ports":4
                },
                "SRAM_KB": 192
            }
        },
        "memory_protocol": "HBM2e",
        "_memory_protocol_list": [
            "HBM2e",
            "DDR4",
            "DDR5",
            "PCIe4",
            "PCIe5"
        ],
        "io": {
            "process_node": "7nm",

            "global_buffer_MB": 0,
            "physical_global_buffer_MB": 0,
            "global_buffer_bandwidth_per_cycle_byte": 0,
            "_commet_global_buffer":"令L2缓存不存在来起到直接对接HBM和core的效果",

            "memory_channel_physical_count": 9,
            "memory_channel_active_count": 16,

            "bandwidth_per_channel_byte":40e9, 
            "_commet_bandwidth_of_HBM <-> core":"假设每个channel带宽为40GB/s",

            "noc_bandwidth_byte_per_second": 40e9,
            "noc_hop_latency_second": 1e-9,
            "noc_model": "estimate",
            "_noc_model_list": [
                "booksim",
                "estimate"
            ],

            "noc_booksim_path": "/home/panyudong/work/3d-monitor/booksim2/src/booksim",
            "noc_booksim_base_cfg": "/home/panyudong/work/3d-monitor/booksim2/runfiles/meshconfig",
            "noc_tmp_dir": "/home/panyudong/work/3d-monitor/LLMCompass_3D_stack/.tmp_booksim",
            "noc_trace_keep": false,
            "noc_flit_bytes": "auto",
            "noc_packet_policy": "auto",
            "noc_auto_max_flits": 4096,
            "noc_topology": "mesh",
            "noc_routing_function": "dor",
            "noc_warmup_periods": 0,
            "noc_max_samples": -1,

            "pin_count_per_channel": 1024,
            "bandwidth_per_pin_bit": 3.2e9,
            "_commet_of_pin":"暂时不清楚pin部分是否需要做修改，先行保留"
        },
        "memory": {
            "total_capacity_GB": 80,
            "dram": {
                "model": "ramulator",
                "_model_list": [
                    "ramulator",
                    "bandwidth"
                ],
                "bandwidth_per_cycle": 40e9,
                "ramulator_path": "/home/panyudong/work/3d-monitor/attacc_simulator/ramulator2/ramulator2",
                "clean_temp": false,
                "channel_per_nmp": 1,
                "n_pch": 2,
                "n_rank": 2,
                "n_bank": 4,
                "n_bg": 4,
                "n_row": 16384,
                "n_col": 32,
                "prefetch_size": 32
            }
        }
    }
}